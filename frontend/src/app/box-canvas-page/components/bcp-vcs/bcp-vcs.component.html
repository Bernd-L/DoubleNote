<div class="card-grid">
  <mat-card>
    <mat-card-title>VCS Status</mat-card-title>
    <mat-card-content>
      Commit hash at head:
      <code>{{ resolveHead(notebook.strings.head) | slice: 0:7 }}</code>
      <br />
      Root tree at head commit:
      <code>{{
        notebook.objects.head.commit.strings.rootCategory | slice: 0:7
      }}</code>
      <br />
      Working tree hash:
      <code>{{ notebook.strings.workingTree | slice: 0:7 }}</code>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button (click)="onCommit()" [disabled]="disableCommit">
        {{ commitText }}
      </button>
    </mat-card-actions>
  </mat-card>

  <mat-card>
    <mat-card-title>Branches & Tags</mat-card-title>
    <mat-card-content>
      <ul>
        <li *ngFor="let branch of notebook.objects.branches | keyvalue">
          {{ branch.key }}: <code>{{ branch.value | hash | slice: 0:7 }}</code>
        </li>
      </ul>
    </mat-card-content>
    <mat-card-actions>
      <button
        mat-button
        [matMenuTriggerFor]="selectBranchOrTag"
        [disabled]="disableCheckout"
      >
        {{ branchText }}
        <mat-icon>arrow_drop_down</mat-icon>
      </button>

      <mat-menu #selectBranchOrTag>
        <button mat-menu-item [matMenuTriggerFor]="selectBranch">
          Branches
        </button>
        <button mat-menu-item [matMenuTriggerFor]="selectTag">
          Tags
        </button>
      </mat-menu>

      <!-- Branches -->
      <mat-menu #selectBranch>
        <ng-container
          *ngFor="let branch of notebook.strings.branches | keyvalue"
        >
          <button
            mat-menu-item
            (click)="onCheckoutBranch(branch.key)"
            *ngIf="calcDisableBranchButton(branch.key)"
          >
            {{ branch.key }}
          </button>
        </ng-container>
      </mat-menu>

      <!-- Tags -->
      <mat-menu #selectTag>
        <button mat-menu-item disabled>
          TODO ðŸ¤·
        </button>
        <button mat-menu-item disabled>
          You can't create them either ðŸ¤·ðŸ¤·
        </button>
        <!-- <ng-container *ngFor="let tag of notebook.strings.tags | keyvalue">
          <button
            mat-menu-item
            (click)="onCheckoutBranch(tag.key)"
            *ngIf="notebook.strings.TODO !== tag.key"
          >
            {{ tag.key }}
          </button>
        </ng-container> -->
      </mat-menu>

      <button mat-button (click)="onCreateBranch()">Create branch</button>
    </mat-card-actions>
  </mat-card>

  <!-- (span>lorem)*100 -->
</div>

<ng-container *ngIf="isDevMode">
  <br />
  <button mat-raised-button (click)="debug()" color="primary">Debug</button>
  <br />
</ng-container>
