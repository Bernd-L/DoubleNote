# DoubleNote Frontend

This is the Frontend of DoubleNote.

It's an [Angular](https://angular.io) single page application written in TypeScript, HTML, and SCSS.

The goal of the frontend is to provide a full-featured web application capable of creating, editing, and view notes -- both in Markdown and as free-hand drawings.

## Implementation strategy

This is how I envision DoubleNote to be implemented

### Initial strategy

Some of this is outdated (see below)

- Provide a sidenav to switch between contexts such as the welcome screen, settings and notebooks
- Use RxJS Observables and Subjects where possible
- Use event-sourcing (CQRS)
- Represent any action as an event as soon as possible
- Connect to users via WebRTC for peer-to-peer communication
  - Use the PeerJS library
- Send every event to all peers as soon as possible
- Treat own events the same way as incoming events from peers
- Only update the state of a note by applying events
- Maybe implement something like Git?
  - Objects
  - Hashes
  - Branches
  - Push/Pull

### 2nd iteration

- Real-time collaboration requires one peer to be the host
- Every action performed by any user needs to be an event
- Pipe every event through the same pipeline
- Treat own events the same way as incoming events from peers
- Allow users to undo and redo any changes made during editing
- Commit after changes are completed

### Editing notes & Markdown engine

We need a syntax tree

Maybe consider using FrontMatter as well
There can be formatting (bold, italics, ...) inline

Several markdown features can be applied to one piece of text.
Some features disable each other, depending on which one is inside of the other
We'll need to run the parser several times

Markdown features

- Code blocks
- Inline code
- Comments
- Tables
- Math blocks
- Inline math
- Inline formatting
  - Bold
  - Italics
  - Underline
  - Strike-through
  - Highlight
- Headings
- Links
- Images
- Abbreviations
- Text
- Quotes
- Critique markup

List of nodes

- Headings
- Comments
- Tables
- Paragraphs

### Another take on collaboration

- Every peer parses their own changes
- Only send the delta to the message bus

## Folder structure

Only the relevant files and folders are listed

- `/frontend/` Contains all files of the frontend
  - `README.md` You are here
  - `src/` Contains all frontend application-source files
    - `app/` The application code
      - `components/` Contains all Angular components
      - `services/` Contains all Angular services
      - `app.module.ts` The main app module
      - `app-routing.module.ts` The routing module (specifies Angular routes)
      - `app.component.*` The root angular component
    - `styles.scss` The global styles
    - `index.html` The index.html file (Includes the Angular root component)
    - `manifest.webmanifest` The Progressive Web App manifest
  - `dist/` Compiler outout; Served by the backend; included in .gitignore
  - `node_modules/` Installed npm dependencies; included in .gitignore
  - `angular.json` The main Angular configuration file
  - `package.json` Declares all frontend dependencies and npm scripts
  - `package-lock.json` An npm-generated file
  - More files generated by the Angular CLI

## Further reading

For information about the backend, see the [backend README.md](/backend/README.md).
For information about the application as a whole, see the [main README.md](/README.md).
